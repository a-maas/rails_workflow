<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: RailsWorkflow::ProcessTemplates::DefaultBuilder
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!RailsWorkflow/ProcessTemplates/DefaultBuilder.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (D)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../RailsWorkflow.html" title="RailsWorkflow (module)">RailsWorkflow</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../ProcessTemplates.html" title="RailsWorkflow::ProcessTemplates (module)">ProcessTemplates</a></span></span>
     &raquo; 
    <span class="title">DefaultBuilder</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: RailsWorkflow::ProcessTemplates::DefaultBuilder
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1">ActiveSupport::Concern</dd>
      
    
  
    
  
  
    <dt class="r2">Included in:</dt>
    <dd class="r2"><span class='object_link'><a href="../ProcessTemplate.html" title="RailsWorkflow::ProcessTemplate (class)">RailsWorkflow::ProcessTemplate</a></span></dd>
    
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">app/concerns/rails_workflow/process_templates/default_builder.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>DefaultBuilder is responsible for building new process and it&#39;s initial
(independent) operations.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_independent_operations-instance_method" title="#build_independent_operations (instance method)">- (Object) <strong>build_independent_operations</strong>(process) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Independent operations is template operations that have no dependencies on
any other operations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_operation-instance_method" title="#build_operation (instance method)">- (Object) <strong>build_operation</strong>(process, template, completed_dependencies = []) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Building new operation for given process.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_process%21-instance_method" title="#build_process! (instance method)">- (Object) <strong>build_process!</strong>(context) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>When process manager building new process, it initializes process template
for new process and call this method to build new process instance.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="build_independent_operations-instance_method">
  
    - (<tt>Object</tt>) <strong>build_independent_operations</strong>(process) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Independent operations is template operations that have no dependencies on
any other operations.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/concerns/rails_workflow/process_templates/default_builder.rb', line 33</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_independent_operations'>build_independent_operations</span> <span class='id identifier rubyid_process'>process</span>
  <span class='id identifier rubyid_independent_operations'>independent_operations</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_operation_template'>operation_template</span><span class='op'>|</span>
    <span class='id identifier rubyid_build_operation'>build_operation</span> <span class='id identifier rubyid_process'>process</span><span class='comma'>,</span> <span class='id identifier rubyid_operation_template'>operation_template</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_operation-instance_method">
  
    - (<tt>Object</tt>) <strong>build_operation</strong>(process, template, completed_dependencies = []) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Building new operation for given process.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>process</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Process.html" title="RailsWorkflow::Process (class)">RailsWorkflow::Process</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>to which new operation will be added.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>template</span>
      
      
        <span class='type'>(<tt>RailsWorkflow::OperationTEmplate</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>which should be used to build new operation</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>completed_dependencies</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../Operation.html" title="RailsWorkflow::Operation (class)">RailsWorkflow::Operation</a></span>&gt;</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>is process operaitons which was completed (or changed statuses) and caused
this new operation creation.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/concerns/rails_workflow/process_templates/default_builder.rb', line 43</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_operation'>build_operation</span> <span class='id identifier rubyid_process'>process</span><span class='comma'>,</span> <span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='id identifier rubyid_completed_dependencies'>completed_dependencies</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_operation'>operation</span> <span class='op'>=</span> <span class='id identifier rubyid_template'>template</span><span class='period'>.</span><span class='id identifier rubyid_build_operation!'>build_operation!</span> <span class='id identifier rubyid_process'>process</span><span class='comma'>,</span> <span class='id identifier rubyid_completed_dependencies'>completed_dependencies</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_operation'>operation</span><span class='period'>.</span><span class='id identifier rubyid_present?'>present?</span>
    <span class='id identifier rubyid_process'>process</span><span class='period'>.</span><span class='id identifier rubyid_operations'>operations</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_operation'>operation</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_operation'>operation</span>
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_exception'>exception</span>
  <span class='const'>RailsWorkflow</span><span class='op'>::</span><span class='const'>Error</span><span class='period'>.</span><span class='id identifier rubyid_create_from'>create_from</span><span class='lparen'>(</span>
      <span class='id identifier rubyid_exception'>exception</span><span class='comma'>,</span> <span class='lbrace'>{</span>
                   <span class='label'>parent:</span> <span class='id identifier rubyid_process'>process</span><span class='comma'>,</span>
                   <span class='label'>target:</span> <span class='id identifier rubyid_process'>process</span><span class='period'>.</span><span class='id identifier rubyid_template'>template</span><span class='comma'>,</span>
                   <span class='label'>method:</span> <span class='symbol'>:build_operation</span><span class='comma'>,</span>
                   <span class='label'>args:</span> <span class='lbracket'>[</span><span class='id identifier rubyid_process'>process</span><span class='comma'>,</span> <span class='id identifier rubyid_template'>template</span><span class='comma'>,</span> <span class='id identifier rubyid_completed_dependencies'>completed_dependencies</span><span class='rbracket'>]</span>
               <span class='rbrace'>}</span>
  <span class='rparen'>)</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="build_process!-instance_method">
  
    - (<tt>Object</tt>) <strong>build_process!</strong>(context) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>When process manager building new process, it initializes process template
for new process and call this method to build new process instance. This
method buildling new process and initial operations (operations that has no
dependencies on any other operations and can be build before process
starts).</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>context</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Context.html" title="RailsWorkflow::Context (class)">RailsWorkflow::Context</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>for new process</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/concerns/rails_workflow/process_templates/default_builder.rb', line 16</span>

<span class='kw'>def</span> <span class='id identifier rubyid_build_process!'>build_process!</span> <span class='id identifier rubyid_context'>context</span>
  <span class='id identifier rubyid_process'>process</span> <span class='op'>=</span> <span class='id identifier rubyid_process_class'>process_class</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span> <span class='label'>template:</span> <span class='kw'>self</span>

  <span class='id identifier rubyid_process'>process</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_transaction'>transaction</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_process'>process</span><span class='period'>.</span><span class='id identifier rubyid_update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='label'>title:</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='label'>status:</span> <span class='const'>Process</span><span class='op'>::</span><span class='const'>NOT_STARTED</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_process'>process</span><span class='period'>.</span><span class='id identifier rubyid_create_context'>create_context</span><span class='lparen'>(</span><span class='label'>data:</span> <span class='id identifier rubyid_context'>context</span><span class='comma'>,</span> <span class='label'>parent:</span> <span class='id identifier rubyid_process'>process</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_build_independent_operations'>build_independent_operations</span> <span class='id identifier rubyid_process'>process</span>
    <span class='id identifier rubyid_process'>process</span><span class='period'>.</span><span class='id identifier rubyid_reload'>reload</span>
    <span class='id identifier rubyid_build_process'>build_process</span><span class='lparen'>(</span><span class='id identifier rubyid_process'>process</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_respond_to?'>respond_to?</span> <span class='symbol'>:build_process</span>
    <span class='id identifier rubyid_process'>process</span>

  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sat Feb 21 22:21:09 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.2).
</div>

  </body>
</html>