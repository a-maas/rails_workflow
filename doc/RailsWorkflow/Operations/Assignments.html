<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: RailsWorkflow::Operations::Assignments
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!RailsWorkflow/Operations/Assignments.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (A)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../RailsWorkflow.html" title="RailsWorkflow (module)">RailsWorkflow</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Operations.html" title="RailsWorkflow::Operations (module)">Operations</a></span></span>
     &raquo; 
    <span class="title">Assignments</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: RailsWorkflow::Operations::Assignments
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1">ActiveSupport::Concern</dd>
      
    
  
    
  
  
    <dt class="r2">Included in:</dt>
    <dd class="r2"><span class='object_link'><a href="../Operation.html" title="RailsWorkflow::Operation (class)">RailsWorkflow::Operation</a></span></dd>
    
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">app/concerns/rails_workflow/operations/assignments.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>User operation should be completed by some specific user. Operation
template specifies user&#39;s that can assign that operation. By default
you can use user role or user group to specify users that can pickup and
complete operaitons but it can be customized.</p>

<p>Only user operaitons in WAITING status can be assigned to user.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#activate-instance_method" title="#activate (instance method)">- (Object) <strong>activate</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Active operation is one that user is working on right now.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assign-instance_method" title="#assign (instance method)">- (Object) <strong>assign</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Assigns operation to given user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assign_to-instance_method" title="#assign_to (instance method)">- (Object) <strong>assign_to</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Assigns operation to given user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assigned%3F-instance_method" title="#assigned? (instance method)">- (boolean) <strong>assigned?</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Checking if operation is assigned to given user.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_be_assigned%3F-instance_method" title="#can_be_assigned? (instance method)">- (boolean) <strong>can_be_assigned?</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Checking if user can be assigned to current operation.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cancel_assignment-instance_method" title="#cancel_assignment (instance method)">- <strong>cancel_assignment</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Allows to cancel assignment operation from specific user.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="activate-instance_method">
  
    - (<tt>Object</tt>) <strong>activate</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Active operation is one that user is working on right now. This is
operation that &#39;current_operation&#39; helper returns. User may have
only one active operation at the same time.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/concerns/rails_workflow/operations/assignments.rb', line 83</span>

<span class='kw'>def</span> <span class='id identifier rubyid_activate'>activate</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_active'>is_active</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_save'>save</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assign-instance_method">
  
    - (<tt>Object</tt>) <strong>assign</strong>(user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Assigns operation to given user. Checks if user can be assigned to given
operation. It&#39;s safe to use that method for operations that is already
assigned to user - this way operation will be set to active current user
operation.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../User.html" title="RailsWorkflow::User (module)">User</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>which will assigned to operation.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94
95</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/concerns/rails_workflow/operations/assignments.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assign'>assign</span> <span class='id identifier rubyid_user'>user</span>
  <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_assigned?'>assigned?</span> <span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_activate'>activate</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='comment'>#if already assigned to user but unactive!
</span>      <span class='lparen'>(</span><span class='id identifier rubyid_can_be_assigned?'>can_be_assigned?</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_assign_to'>assign_to</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='comment'>#user first time assigned to operation
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assign_to-instance_method">
  
    - (<tt>Object</tt>) <strong>assign_to</strong>(user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Assigns operation to given user.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../User.html" title="RailsWorkflow::User (module)">User</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>which will be used to check</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


71
72
73
74
75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/concerns/rails_workflow/operations/assignments.rb', line 71</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assign_to'>assign_to</span> <span class='id identifier rubyid_user'>user</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assignment'>assignment</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_active'>is_active</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assigned_at'>assigned_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_zone'>zone</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_assigned_to'>assigned_to</span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_update_all'>update_all</span><span class='lparen'>(</span><span class='label'>is_active:</span> <span class='kw'>false</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_save'>save</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assigned?-instance_method">
  
    - (<tt>boolean</tt>) <strong>assigned?</strong>(user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Checking if operation is assigned to given user.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../User.html" title="RailsWorkflow::User (module)">User</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>which will be used to check</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if this operation assigned to given user or false.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/concerns/rails_workflow/operations/assignments.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assigned?'>assigned?</span> <span class='id identifier rubyid_user'>user</span>
  <span class='id identifier rubyid_assignment'>assignment</span> <span class='op'>==</span> <span class='id identifier rubyid_user'>user</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_be_assigned?-instance_method">
  
    - (<tt>boolean</tt>) <strong>can_be_assigned?</strong>(user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Checking if user can be assigned to current operation.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../User.html" title="RailsWorkflow::User (module)">User</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>which will be used to check</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true if this operation can be assigned to given user or false.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/concerns/rails_workflow/operations/assignments.rb', line 65</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_be_assigned?'>can_be_assigned?</span> <span class='id identifier rubyid_user'>user</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assignment'>assignment</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cancel_assignment-instance_method">
  
    - <strong>cancel_assignment</strong>(user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Allows to cancel assignment operation from specific user. For example user
has vacation and somebody else should complete operation. In this case
operation is no longer assigned to given user and operation again assigned
to role or group.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../User.html" title="RailsWorkflow::User (module)">User</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>which will be used to check</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56
57
58
59
60</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/concerns/rails_workflow/operations/assignments.rb', line 54</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cancel_assignment'>cancel_assignment</span> <span class='id identifier rubyid_user'>user</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_assigned?'>assigned?</span> <span class='id identifier rubyid_user'>user</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_assignment'>assignment</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_is_active'>is_active</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_save'>save</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sat Feb 21 22:21:08 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.2).
</div>

  </body>
</html>